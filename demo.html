<html>

<head>
    <title>Chainwork.js Demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.3.1/lodash.js"></script>
    <script src="chainwork.js"></script>
    <script src="chainwork-components.js"></script>
    <!-- for chain display -->
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenMax.min.js'></script>
</head>

<body>
    
    <input type="checkbox"><span>Share on facebook</span>
    <div>
        <button onclick="chain.play();">chain.play()</button>
        <button onclick="chain.seek(3);">chain.seek(3)</button>
        <button onclick="chain.next();">chain.next()</button>
    </div>

    <div class="chainDisplay">
      
    </div>
    <script>
    var data = {};

    var chain = new ChainWork({
        autoPlay: true,
        debug: true
    });

    chain.add('facebookInit', {appId: '115378765262567'});
    chain.pause();
    chain.add('fbLogin', {stopChainOnCancel: true});
    chain.if(
        function() {
            return document.querySelector('input[type="checkbox"]').checked;
        }, {
            componentName: 'fbFeed',
            settings: {
                params: {
                    method: 'feed',
                    name: 'Name',
                    caption: 'caption',
                    link: 'https://github.com/Andrinoid/chainwork/',
                    picture: 'https://apps.tweecode.com/custom/obeurovision2015/images/feed.png',
                    description: 'Description.',
                },
                forceRun: true,
                onPublished: function(rsp) {},
                onDeclined: function(rsp) {},
            }
        }
    );
    chain.add('fbUserInfo', {
        onComplete: function(data) {
            window.data.first_name = data.first_name;
        }
    });
    chain.call(function(sync) {
        alert('hi '+data.first_name);
        sync();
    });
    chain.call(function() {
        alert('dont hang up on me');
    });



    var ChainDisplay = (function() {
        
        function ChainDisplay() {
            console.log('todo make chain display for visualization');
        }


        return ChainDisplay;
    })();
   

    </script>
</body>

</html>
